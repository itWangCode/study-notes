



### CDN

Content Delivery Network,内容分发网络

通过把内容部署在全球各地，让用户从最近的服务器加载内容。大幅降低传播分组的时间。


### traceroute

traceroute测量延迟


### 带宽和延迟

延迟影响因素最大

### Ookla测宽带

http://speedtest.net


## TCP

IP：负责联网主机之间的路由选择和寻址
TCP:负责在不可靠的传输信道上提供可靠的抽象层。

HTTP可以用TCP传输协议或者其他，例如UDP协议


### 三次握手

1. 客户端选择一个随机序列号x，并发送一个SYN分组，其中可能还包括其他TCP标志和选项
2. SYN ACK : 服务器给X加1，并选择自己的一个随机序列号y，追加自己的标志和选项，然后返回响应
3. ACK：客户端给x和y加1并发送握手期间的最后一个ACK分组。

### 拥塞预防以及控制

#### 流量控制

rwnd：[接收窗口],发送端和接收端的接收窗口大小，包含能够保存数据的缓冲区空间大小的信息。

窗口缩放: TCP Window Scaling

4种预防流量暴增算法 ：慢启动，拥塞预防，快速重发，快速恢复

#### 慢启动

保守的窗口初始化链接，随后的每次往返都会成倍提高传输的数据量

cwnd：拥塞窗口大小，发送端对从客户端接收确认（ACK）之前可以发送数据量的限制。

指数增加传递cwnd

#### 拥塞预防

### 带宽延迟积

BDP:数据链路的容量与其端到端延迟的乘积。这个结果就是任意时刻处于在途未确认状态的最大数据量。

### 队首阻塞

按序交付和可靠交付的时候，TCP不是必要的选择。会导致额外的延迟，对性能造成负面影响。

无需按序交付数据或能够处理分组丢失的应用程序，以及对延迟或者抖动要求很高的应用程序，最好选择UDP等协议。

### TCP优化

- TCP三次握手增加了整整一次往返时间
- TCP慢启动讲被应用到每个新链接
- TCP流量及拥塞控制会影响所有链接的吞吐量
- TCP的吞吐量由当前拥塞窗口大小控制

#### 服务器配置调优

让服务器跟上时代是优化发送端和接收端的首要措施

优化项：

- 增大TCP的初始拥塞窗口

- 慢启动重启：在连接空闲时，禁用慢启动可以改善瞬时发送数据的长TCP连接的性能。

- 窗口缩放(RFC1332):启用窗口缩放可以增大最大接收窗口大小，可以让高延迟的连接增加吞吐量。

- TCP快速打开：

#### 应用程序行为调优

- 再快也快不过什么也不用发送，能少发就少发

- 我们不能让数据传输的更快，但可以让他们传输的距离更短

- 重用TCP连接是提升性能的关键，

#### 检查清单：

- 把服务器内核升级到最新版本
- 确保cwnd大小为10
- 禁用空闲后的慢启动
- 确保启动窗口缩放
- 减少传输冗余数据
- 压缩要传输的数据
- 把服务器放到离用户近的地方以减少往返时间
- 尽最大可能重用已经建立的TCP连接。

## UDP

## 传输层安全（TLS）

SSL(Secure Sockets Layer,安全套接字层)。

SSL不会影响上层协议（如HTTP，电子邮件，即时通讯），但能够保证上层协议的网络通信安全。



1. 应用层（HTTP...）
2. 会话层 (TLS)
3. 传输层(TCP)
4. 网络层(IP)
5. 数据链路层
6. 物理层


### 加密，身份验证，完整性

加密：混淆数据的机制

身份验证：验证身份标识有效性的机制

完整性：检测消息是否被篡改或伪造的机制














