define(function(require,exports,module){function e(){this.requestHead=REQUESTHEAD}module.exports=e,e.prototype.upLoad=function(e,t,o){var n=document.getElementById(e),a=new FormData,s=this;n.addEventListener("change",function(e){for(var i,d=n.files,p=new XMLHttpRequest,r=0;i=d[r];r++)a.append("file",i);a.append("type",o),p.addEventListener("load",function(e){var o=JSON.parse(this.responseText).data.pic_url,n=JSON.parse(this.responseText).data.sysImageId;t.call(this,o,n)}),p.open("POST",s.requestHead+"/upload_image",!0),p.send(a)},!1)},e.prototype.send=function(e,t,o){$.ajax({type:"POST",url:this.requestHead+"/web"+e,data:t,dataType:"json",success:function(e){if(200==e.sys){var t=e.code;0==t?o.call(this,e.data):(popUpWindow.alert("操作失败："+e.desc,function(){}),102==t&&(docCookies.removeItem("loginName","/"),docCookies.removeItem("loginPassword","/"),window.location.href="login.html"))}else popUpWindow.alert("操作失败：网络原因",function(){})}})}});